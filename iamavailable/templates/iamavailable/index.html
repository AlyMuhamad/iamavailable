{% extends '_base.html' %} {% load static %}
<html>
  <body>
    {% block content %}
    <div class="container">
      <div class="d-flex flex-column align-items-center">
        <p class="fw-bold fs-1">The 1# job board for developers</p>
        <p class="text-black-50">
          Looking for a job? Here you can find the best jobs worldwide
        </p>
      </div>
      <form
        action="{% url 'home' %}"
        method="GET"
        class="d-flex p-3 gap-2 align-items-center justify-content-center mb-4 mt-5 rounded bg-light search-container"
      >
        <div class="position-relative">
          <i
            class="fa-solid fa-magnifying-glass ms-2 text-black-50 position-absolute top-50 translate-middle-y fs-5"
          ></i>
          <input
            type="text"
            name="search_query"
            value="{{search_query}}"
            class="rounded p-2 ps-5 border-0"
            placeholder="Search for a job"
          />
        </div>
        <div class="position-relative">
          <i
            class="fa-solid fa-location-dot fa-solid fa-magnifying-glass ms-2 text-black-50 position-absolute top-50 translate-middle-y fs-5"
          ></i>
          <input
            type="text"
            name="location_query"
            value="{{location_query}}"
            placeholder="City or region"
            class="rounded p-2 ps-5 border-0"
          />
        </div>
        <input
          type="submit"
          value="Search"
          class="border-0 fw-bold p-2 ps-4 pe-4 bg-dark rounded text-white"
        />
      </form>
      {% if jobs %}
      <ul class="list-unstyled">
        {% for job in jobs %}
        <li class="shadow-sm p-3 mb-5 bg-white rounded">
          <a
            href="{% url 'job_detail' job.id %}"
            class="text-decoration-none fw-bold fs-4"
          >
            {{ job.title }}
          </a>
          <div class="d-flex gap-3 mb-3 job-details">
            <p class="mb-0 fw-bold">{{ job.company }}</p>
            <p class="mb-0 fw-bold text-black-50 separator">|</p>
            <div class="d-flex gap-2 align-items-center">
              <i
                class="fa-solid fa-location-dot fa-solid fa-magnifying-glass text-black-50"
              ></i>
              {{ job.location }}
            </div>
            <p class="mb-0 fw-bold text-black-50 separator">|</p>
            <div class="d-flex gap-2 align-items-center">
              <i class="fa-solid fa-chart-column text-black-50"></i>
              {{ job.experience }}
            </div>
          </div>
          <ul class="d-flex gap-2 mb-2 list-unstyled">
            {% for tag in job.tags.all %}
            <li class="bg-light p-2 ps-3 pe-3" style="border-radius: 1.2rem">
              {{tag}}
            </li>
            {% endfor %}
          </ul>
          <p>{{ job.description|truncatechars:300 }}</p>
          <p class="mb-4" style="font-size: 0.9rem">{{ job.created.date }}</p>
          <a
            href="{% url 'job_detail' job.id %}"
            class="text-decoration-none bg-dark p-2 ps-3 pe-3 text-white rounded"
          >
            Apply Now</a
          >
        </li>
        {% endfor %}
      </ul>

      {% if jobs.has_other_pages %}
      <nav aria-label="...">
        <ul class="pagination justify-content-center">
          <li
            class="page-item {% if not jobs.has_previous %} disabled {% endif %}"
          >
            <a
              class="page-link"
              href="{% if jobs.has_previous %}?page={{jobs.previous_page_number}}{% endif %} "
              >Previous</a
            >
          </li>
          {% for page in paginator.page_range %}
          <li
            class="page-item {% if page == jobs.number %} active {% endif %}"
            aria-current="{% if page == jobs.number %} page {% endif %}"
          >
            <a href="?page={{page}}" class="page-link">{{page}}</a>
          </li>
          {% endfor %}
          <li class="page-item">
            <a
              class="page-link {% if not jobs.has_next %} disabled {% endif %}"
              href="{% if jobs.has_next %}?page={{jobs.next_page_number}}{% endif %} "
              >Next</a
            >
          </li>
        </ul>
      </nav>
      {% endif %} {% else %}
      <p>Sorry, we don't have any jobs to display.</p>
      {% endif %}
    </div>
    {% endblock %}
  </body>
</html>
